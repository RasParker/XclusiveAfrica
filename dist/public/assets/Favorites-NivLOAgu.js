import{u as j,r as o,j as e,B as n,L as m,C as p,A as b,m as N,n as y,l as w,g as E,o as S}from"./index-DnjzDop3.js";import{E as l}from"./EdgeToEdgeContainer-kS07pzFb.js";import{L as k}from"./LoadingSpinner-D0nQGNMo.js";import{H as x}from"./heart-BIzJO6uv.js";import{I as C}from"./image-DUscFDhE.js";import{S as F}from"./star-DUOoHea0.js";const $=()=>{const{user:a}=j(),[i,d]=o.useState([]),[h,f]=o.useState(!0),[c,u]=o.useState(null);o.useEffect(()=>{(async()=>{if(a)try{const r=await fetch(`/api/fan/${a.id}/favorites`);if(!r.ok)throw new Error("Failed to fetch favorites");const t=await r.json();d(t)}catch(r){u(r instanceof Error?r.message:"An error occurred")}finally{f(!1)}})()},[a]);const g=async s=>{if(a)try{(await fetch(`/api/creators/${s}/favorite`,{method:"DELETE"})).ok&&d(t=>t.filter(v=>v.id!==s))}catch(r){console.error("Error removing favorite:",r)}};return e.jsxs(l,{children:[e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-accent/5 to-primary/10 border-b border-border",children:e.jsx(l,{maxWidth:"7xl",enablePadding:!0,enableTopPadding:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-foreground mb-4",children:"Your Favorites"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Keep track of creators you love and want to follow"})]})})}),e.jsx(l,{maxWidth:"7xl",enablePadding:!0,className:"py-6 sm:py-8",children:h?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(k,{})}):c?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-muted-foreground",children:["Error loading favorites: ",c]})}):i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-muted rounded-full flex items-center justify-center",children:e.jsx(x,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No favorites yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Start favoriting creators to keep track of ones you love"}),e.jsx(n,{variant:"premium",asChild:!0,children:e.jsx(m,{to:"/explore",children:"Discover Creators"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-muted-foreground",children:[i.length," favorited creator",i.length!==1?"s":""]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxs(p,{className:"overflow-hidden bg-gradient-card border-border/50",children:[e.jsxs("div",{className:"relative",children:[s.cover_image?e.jsx("img",{src:s.cover_image,alt:s.display_name,className:"w-full h-32 object-cover",onError:r=>{var t;r.currentTarget.style.display="none",(t=r.currentTarget.nextElementSibling)==null||t.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-full h-32 bg-gradient-to-r from-primary/20 via-accent/10 to-primary/20 flex items-center justify-center ${s.cover_image?"hidden":""}`,children:e.jsx(C,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("div",{className:"absolute -bottom-6 left-4",children:e.jsxs(b,{className:"w-12 h-12 border-2 border-background",children:[e.jsx(N,{src:s.avatar,alt:s.username}),e.jsx(y,{children:s.display_name.charAt(0)})]})}),s.verified&&e.jsxs(w,{className:"absolute top-2 right-2 bg-accent text-accent-foreground hover:bg-accent/90",children:[e.jsx(F,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsx(E,{className:"pt-8 pb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.display_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",s.username]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-tight max-h-[2.4em] overflow-hidden",children:s.bio}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(S,{className:"w-4 h-4"}),s.subscribers.toLocaleString()," subscribers"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Favorited on ",new Date(s.favorited_at).toLocaleDateString()]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(m,{to:`/creator/${s.username}`,children:"View Profile"})}),e.jsxs(n,{variant:"ghost",size:"sm",className:"w-full text-muted-foreground hover:text-destructive",onClick:()=>g(s.id),children:[e.jsx(x,{className:"w-4 h-4 mr-2 fill-current"}),"Remove from favorites"]})]})]})})]},s.id))})]})})]})};export{$ as Favorites};
