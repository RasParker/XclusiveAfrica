import{r as t,u as L,a as k,b as I,c as P,j as e,L as l,C as B,d as D,e as F,f as T,g as q,h as j,I as b,B as v}from"./index-DnjzDop3.js";import{E as O}from"./eye-off-Bcppvf7W.js";import{E as W}from"./eye-DwXGc38I.js";const J=()=>{var p,f;const[d,y]=t.useState(""),[m,N]=t.useState(""),[n,w]=t.useState(!1),[u,h]=t.useState(!1),{login:S,user:r,isLoading:i}=L(),{toast:x}=k(),o=I(),c=(f=(p=P().state)==null?void 0:p.from)==null?void 0:f.pathname;t.useEffect(()=>{if(r&&!i){const s=c||(r.role==="admin"?"/admin/dashboard":r.role==="creator"?"/creator/dashboard":"/fan/dashboard");o(s,{replace:!0})}},[r,i,o,c]);const E=async s=>{s.preventDefault(),h(!0);try{await S(d,m),x({title:"Welcome back!",description:"You have successfully logged in."}),setTimeout(()=>{const a=localStorage.getItem("xclusive_user");if(a){const g=JSON.parse(a),C=c||(g.role==="admin"?"/admin/dashboard":g.role==="creator"?"/creator/dashboard":"/fan/dashboard");o(C,{replace:!0})}},100)}catch(a){x({title:"Login failed",description:a instanceof Error?a.message:"Invalid credentials",variant:"destructive"})}finally{h(!1)}};return i?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs(l,{to:"/",className:"inline-flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-xl",children:"X"})}),e.jsx("span",{className:"text-2xl font-bold text-gradient-primary",children:"Xclusive"})]})}),e.jsxs(B,{className:"bg-gradient-card border-border/50",children:[e.jsxs(D,{className:"text-center",children:[e.jsx(F,{className:"text-2xl",children:"Welcome Back"}),e.jsx(T,{children:"Sign in to your account to continue"})]}),e.jsxs(q,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(b,{id:"email",type:"email",placeholder:"Enter your email",value:d,onChange:s=>y(s.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{id:"password",type:n?"text":"password",placeholder:"Enter your password",value:m,onChange:s=>N(s.target.value),required:!0}),e.jsx(v,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!n),children:n?e.jsx(O,{className:"h-4 w-4"}):e.jsx(W,{className:"h-4 w-4"})})]})]}),e.jsx(v,{type:"submit",className:"w-full",disabled:u,children:u?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(l,{to:"/forgot-password",className:"text-sm text-white hover:underline",children:"Forgot your password?"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(l,{to:"/signup",className:"text-blue-500 hover:underline font-medium",children:"Sign up"})]})]})]})]})]})})};export{J as Login};
