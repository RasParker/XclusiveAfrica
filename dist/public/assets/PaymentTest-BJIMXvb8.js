import{r as c,j as e,C as o,d,e as m,g as x,l as i,F as P,f as S,B as u}from"./index-DnjzDop3.js";import{C as T}from"./circle-alert-B8H_cjr7.js";import{C as b}from"./circle-check-big-CTWGQ5qD.js";import{C as k}from"./circle-x-DXUbMNCI.js";const O=()=>{var y;const[t,g]=c.useState(null),[h,l]=c.useState([]),[p,f]=c.useState(!1);c.useEffect(()=>{N()},[]);const N=async()=>{try{const a=await(await fetch("/api/payment-test/test-config")).json();g(a.data)}catch(s){console.error("Failed to fetch config:",s)}},j=async(s,a)=>{f(!0);try{const n=await a();l(r=>[...r,{name:s,success:!0,result:n,timestamp:new Date().toISOString()}])}catch(n){l(r=>[...r,{name:s,success:!1,error:n.message,timestamp:new Date().toISOString()}])}finally{f(!1)}},v=async()=>await(await fetch("/api/payment-test/test-payment",{method:"POST",headers:{"Content-Type":"application/json"}})).json(),C=async()=>{const a=await(await fetch("/api/payment-test/test-payment",{method:"POST",headers:{"Content-Type":"application/json"}})).json();if(!a.success)throw new Error("Failed to initialize test payment");const n=a.data.data.reference;return await(await fetch(`/api/payment-test/test-verify/${n}`,{method:"POST"})).json()},w=s=>s?e.jsx(b,{className:"h-5 w-5 text-green-500"}):e.jsx(k,{className:"h-5 w-5 text-red-500"});return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Payment Integration Test"}),e.jsx("p",{className:"text-muted-foreground",children:"Test Paystack payment integration functionality"})]}),e.jsxs(o,{children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Configuration Status"]})}),e.jsx(x,{children:t?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(i,{variant:t.has_public_key?"default":"destructive",children:"Public Key"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.has_public_key?"Configured":"Missing"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(i,{variant:t.has_secret_key?"default":"destructive",children:"Secret Key"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.has_secret_key?"Configured":"Missing"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(i,{variant:t.is_development?"secondary":"default",children:"Environment"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.environment})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(i,{variant:"outline",children:"Public Key Preview"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-mono",children:[(y=t.public_key)==null?void 0:y.substring(0,10),"..."]})]})]}):e.jsx("p",{children:"Loading configuration..."})})]}),e.jsxs(o,{children:[e.jsxs(d,{children:[e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-5 w-5"}),"Payment Tests"]}),e.jsx(S,{children:"Run tests to verify payment functionality"})]}),e.jsx(x,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(u,{onClick:()=>j("Payment Initialization",v),disabled:p,children:"Test Payment Init"}),e.jsx(u,{onClick:()=>j("Payment Verification",C),disabled:p,children:"Test Payment Verify"}),e.jsx(u,{variant:"outline",onClick:()=>l([]),children:"Clear Results"})]})})]}),h.length>0&&e.jsxs(o,{children:[e.jsx(d,{children:e.jsx(m,{children:"Test Results"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-3",children:h.map((s,a)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[w(s.success),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx(i,{variant:s.success?"default":"destructive",children:s.success?"PASS":"FAIL"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.timestamp).toLocaleString()}),s.success&&s.result&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-sm cursor-pointer",children:"View Details"}),e.jsx("pre",{className:"text-xs mt-2 p-2 bg-muted rounded overflow-auto",children:JSON.stringify(s.result,null,2)})]}),!s.success&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.error})]})]},a))})})]})]})};export{O as default};
