import{a as Y,u as K,r as a,j as e,I as Q,B as p,C as X,A as Z,m as ee,n as se,l as te,g as re,o as ie,L as ae,D as oe,p as ne,q as le,s as ce,H as de}from"./index-DnjzDop3.js";import{E as C}from"./EdgeToEdgeContainer-kS07pzFb.js";import{U as me,P as ue}from"./PaymentModal-Bl23r-KA.js";import{S as T}from"./search-tyvWbnyU.js";import{S as M}from"./star-DUOoHea0.js";import{I as pe}from"./image-DUscFDhE.js";import{H as he}from"./heart-BIzJO6uv.js";import{P as fe}from"./palette-DQH6SLVE.js";import{D as ge,M as xe,L as be,C as ve,S as ye,G as je,B as we,a as Ne}from"./shirt-HfxHFPZG.js";import"./select-BgAE-lOE.js";import"./chevron-up-CD9nw7va.js";import"./smartphone-DXpypUrS.js";import"./circle-alert-B8H_cjr7.js";import"./loader-circle--UTD5YcZ.js";const B=[{id:"1",username:"artisticmia",display_name:"Artistic Mia",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",cover:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=200&fit=crop",bio:"Digital artist creating stunning fantasy worlds and character designs",category:"Art",subscribers:2840,verified:!0,tiers:[{id:"mock_1_1",name:"Supporter",price:5,description:"Basic support tier",benefits:["Access to exclusive posts","Monthly updates"]},{id:"mock_1_2",name:"Fan",price:15,description:"Fan tier with more benefits",benefits:["Everything in Supporter","Direct messages","Weekly updates"]},{id:"mock_1_3",name:"Superfan",price:25,description:"Ultimate fan experience",benefits:["Everything in Fan","Video calls","Custom content"]}]},{id:"2",username:"fitnessking",display_name:"Fitness King",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",cover:"https://images.unsplash.com/photo-1571019613454-1cb2f9b2d8b?w=400&h=200&fit=crop",bio:"Personal trainer sharing workout tips and nutrition advice",category:"Fitness",subscribers:5120,verified:!0,tiers:[{id:"mock_2_1",name:"Basic",price:10,description:"Basic fitness plan",benefits:["Weekly workout videos","Nutrition tips"]},{id:"mock_2_2",name:"Premium",price:20,description:"Premium fitness experience",benefits:["Everything in Basic","Personal training sessions","Custom meal plans"]}]},{id:"3",username:"musicmaker",display_name:"Music Maker",avatar:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=150&h=150&fit=crop&crop=face",cover:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=200&fit=crop",bio:"Producer creating exclusive beats and music tutorials",category:"Music",subscribers:1890,verified:!1,tiers:[{id:"mock_3_1",name:"Listener",price:8,description:"Music lover tier",benefits:["Early access to new tracks","Behind the scenes content"]},{id:"mock_3_2",name:"Producer",price:18,description:"Producer collaboration tier",benefits:["Everything in Listener","Beat making tutorials","Collaboration opportunities"]}]},{id:"4",username:"techguru",display_name:"Tech Guru",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",cover:"https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400&h=200&fit=crop",bio:"Technology reviews and programming tutorials",category:"Tech",subscribers:3250,verified:!0,tiers:[{id:"mock_4_1",name:"Follower",price:7,description:"Tech enthusiast tier",benefits:["Weekly tech news","Product reviews"]},{id:"mock_4_2",name:"Student",price:12,description:"Learning focused tier",benefits:["Everything in Follower","Programming tutorials","Code reviews"]},{id:"mock_4_3",name:"Pro",price:25,description:"Professional development tier",benefits:["Everything in Student","One-on-one mentoring","Career guidance"]}]},{id:"5",username:"cookingstar",display_name:"Cooking Star",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",cover:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=400&h=200&fit=crop",bio:"Chef sharing exclusive recipes and cooking techniques",category:"Cooking",subscribers:2150,verified:!0,tiers:[{id:"mock_5_1",name:"Foodie",price:9,description:"Food lover tier",benefits:["Weekly recipes","Cooking tips"]},{id:"mock_5_2",name:"Chef",price:19,description:"Professional cooking tier",benefits:["Everything in Foodie","Live cooking sessions","Professional techniques"]}]},{id:"6",username:"fashionista",display_name:"Style Maven",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face",cover:"https://images.unsplash.com/photo-1445205170230-053b83016050?w=400&h=200&fit=crop",bio:"Fashion designer and style consultant",category:"Fashion",subscribers:1820,verified:!1,tiers:[{id:"mock_6_1",name:"Trendy",price:12,description:"Fashion forward tier",benefits:["Style guides","Trend reports"]},{id:"mock_6_2",name:"Stylish",price:22,description:"Personal styling tier",benefits:["Everything in Trendy","Personal styling sessions","Wardrobe consultations"]}]}],ke={Palette:fe,Dumbbell:ge,Music:xe,Laptop:be,ChefHat:ve,Shirt:ye,Gamepad2:je,Briefcase:we,Home:de,GraduationCap:Ne},He=()=>{const{toast:v}=Y(),{user:y}=K(),[j,$]=a.useState(""),[m,S]=a.useState("All"),[h,W]=a.useState([]),[f,I]=a.useState(!0),[D,w]=a.useState(!1),[H,_]=a.useState(!1),[L,E]=a.useState(null),[c,P]=a.useState(null),[Ce,O]=a.useState([]),[A,F]=a.useState([]),[G,R]=a.useState({}),[z,U]=a.useState({});a.useEffect(()=>{(async()=>{try{const t=await fetch("/api/categories");if(t.ok){const r=await t.json();W(r)}else console.error("Failed to fetch categories")}catch(t){console.error("Error fetching categories:",t)}finally{I(!1)}})()},[]),a.useEffect(()=>{(async()=>{if(!f)try{const t=await fetch("/api/creators");if(t.ok){const r=await t.json();console.log("Fetched real creators:",r);const o=r.filter(i=>i.status==="active"),x=await Promise.all(o.map(async i=>{let d=[];try{const l=await fetch(`/api/creators/${i.id}/tiers`);if(l.ok){const b=await l.json();console.log(`Fetched tiers for creator ${i.id} (${i.username}):`,b),d=b.map(u=>({id:u.id,name:u.name,price:u.price,description:u.description||"",benefits:u.benefits||[],creator_id:u.creator_id})),console.log(`Transformed tiers for creator ${i.id}:`,d)}}catch(l){console.error("Error fetching subscription tiers:",l),d=[]}let n="General";if(i.primary_category_id&&h.length>0){const l=h.find(b=>b.id===i.primary_category_id);l&&(n=l.name)}return{id:`real_${i.id}`,username:i.username,display_name:i.display_name||i.username,avatar:i.avatar||null,cover:i.cover_image||null,bio:i.bio||"Creator profile - join for exclusive content!",category:n,subscribers:i.total_subscribers||0,verified:i.verified||!1,tiers:d}}));O(x);const J=[...x,...B];F(J);const N={},k={};for(const i of x){const d=i.id.replace("real_","");try{const n=await fetch(`/api/creators/${d}/likes-count`);if(n.ok){const l=await n.json();N[i.id]=l.count||0}}catch(n){console.error(`Error fetching like count for creator ${d}:`,n),N[i.id]=0}try{const n=await fetch(`/api/creators/${d}/followers-count`);if(n.ok){const l=await n.json();k[i.id]=l.count||0}}catch(n){console.error(`Error fetching follower count for creator ${d}:`,n),k[i.id]=0}}R(N),U(k)}}catch(t){console.error("Error fetching creators:",t),F(B)}})()},[f,h,y]);const q=async(s,t)=>{if(!y){window.location.href="/login?redirect=/explore";return}try{const r=A.find(o=>o.display_name===s);if(console.log(`Looking for creator with display_name: "${s}"`),console.log("Found creator:",r),console.log("Creator tiers:",r==null?void 0:r.tiers),!r){v({title:"Error",description:"Creator not found.",variant:"destructive"});return}if(r.id.startsWith("real_")&&(await fetch(`/api/subscriptions/user/${y.id}/creator/${parseInt(r.id.replace("real_",""))}`)).ok){v({title:"Already subscribed",description:`You already have an active subscription to ${s}.`,variant:"destructive"});return}console.log("Setting selectedCreator:",r),P(r),w(!0)}catch(r){console.error("Subscription check error:",r),v({title:"Error",description:"Failed to check subscription status. Please try again.",variant:"destructive"})}},V=s=>{E(s),w(!1),_(!0)},g=A.filter(s=>{const t=s.display_name.toLowerCase().includes(j.toLowerCase())||s.bio.toLowerCase().includes(j.toLowerCase()),r=m==="All"||s.category===m;return t&&r});return e.jsxs(C,{children:[e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-accent/5 to-primary/10 border-b border-border",children:e.jsx(C,{maxWidth:"7xl",enablePadding:!0,enableTopPadding:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-foreground mb-4",children:"Discover Amazing Creators"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Find creators you love and support their exclusive content with subscriptions"})]})})}),e.jsxs(C,{maxWidth:"7xl",enablePadding:!0,className:"py-6 sm:py-8",children:[e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsxs("div",{className:"relative max-w-md mx-auto",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Q,{placeholder:"Search creators...",value:j,onChange:s=>$(s.target.value),className:"pl-10"})]}),e.jsx("div",{className:"relative max-w-full",children:f?e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("div",{className:"h-8 w-12 bg-muted/50 rounded-full animate-pulse"}),[...Array(6)].map((s,t)=>e.jsx("div",{className:"h-8 w-16 bg-muted/50 rounded-full animate-pulse"},t))]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{id:"scroll-left",className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-background/80 backdrop-blur-sm border border-border rounded-full w-8 h-8 flex items-center justify-center hover:bg-muted transition-colors opacity-0 pointer-events-none",onClick:()=>{const s=document.getElementById("category-scroll-container");s&&s.scrollBy({left:-200,behavior:"smooth"})},"aria-label":"Scroll categories left",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{id:"category-scroll-container",className:"flex gap-2 overflow-x-auto scrollbar-hide px-8 mx-auto scroll-smooth",style:{scrollbarWidth:"none",msOverflowStyle:"none"},onScroll:s=>{const t=s.currentTarget,r=document.getElementById("scroll-left"),o=document.getElementById("scroll-right");r&&o&&(t.scrollLeft>10?(r.classList.remove("opacity-0","pointer-events-none"),r.classList.add("opacity-100")):(r.classList.add("opacity-0","pointer-events-none"),r.classList.remove("opacity-100")),t.scrollLeft+t.clientWidth>=t.scrollWidth-10?(o.classList.add("opacity-0","pointer-events-none"),o.classList.remove("opacity-100")):(o.classList.remove("opacity-0","pointer-events-none"),o.classList.add("opacity-100")))},ref:s=>{s&&!f&&setTimeout(()=>{const t=document.getElementById("scroll-left"),r=document.getElementById("scroll-right");t&&r&&(t.classList.add("opacity-0","pointer-events-none"),t.classList.remove("opacity-100"),s.scrollWidth>s.clientWidth?(r.classList.remove("opacity-0","pointer-events-none"),r.classList.add("opacity-100")):(r.classList.add("opacity-0","pointer-events-none"),r.classList.remove("opacity-100")))},100)},children:[e.jsx(p,{variant:m==="All"?"default":"outline",size:"sm",onClick:()=>S("All"),className:`flex-shrink-0 rounded-lg px-4 ${m==="All"?"bg-white text-black hover:bg-white/90":"hover:bg-[#1e1e24] hover:text-foreground focus-visible:ring-0 focus-visible:ring-offset-0"}`,"data-testid":"category-filter-all",children:"All"}),h.map(s=>{const t=ke[s.icon]||M;return e.jsxs(p,{variant:m===s.name?"default":"outline",size:"sm",onClick:()=>S(s.name),className:`flex-shrink-0 rounded-lg px-4 ${m===s.name?"bg-white text-black hover:bg-white/90":"hover:bg-[#1e1e24] hover:text-foreground focus-visible:ring-0 focus-visible:ring-offset-0"}`,"data-testid":`category-filter-${s.slug}`,children:[e.jsx(t,{className:"w-3 h-3 mr-1",style:{color:m===s.name?"#000":s.color}}),s.name]},s.slug)})]}),e.jsx("button",{id:"scroll-right",className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-background/80 backdrop-blur-sm border border-border rounded-full w-8 h-8 flex items-center justify-center hover:bg-muted transition-colors opacity-0 pointer-events-none",onClick:()=>{const s=document.getElementById("category-scroll-container");s&&s.scrollBy({left:200,behavior:"smooth"})},"aria-label":"Scroll categories right",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-muted-foreground",children:[g.length," creator",g.length!==1?"s":""," found"]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(s=>e.jsxs(X,{className:"overflow-hidden bg-gradient-card border-border/50",children:[e.jsxs("div",{className:"relative",children:[s.cover?e.jsx("img",{src:s.cover,alt:s.display_name,className:"w-full h-32 object-cover",onError:t=>{var r;t.currentTarget.style.display="none",(r=t.currentTarget.nextElementSibling)==null||r.classList.remove("hidden")}}):null,e.jsx("div",{className:`w-full h-32 bg-gradient-to-r from-primary/20 via-accent/10 to-primary/20 flex items-center justify-center ${s.cover?"hidden":""}`,children:e.jsx(pe,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("div",{className:"absolute -bottom-6 left-4",children:e.jsxs(Z,{className:"w-12 h-12 border-2 border-background",children:[e.jsx(ee,{src:s.avatar,alt:s.username}),e.jsx(se,{children:s.display_name.charAt(0)})]})}),s.verified&&e.jsxs(te,{className:"absolute top-2 right-2 bg-accent text-accent-foreground hover:bg-accent/90",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),e.jsx(re,{className:"pt-8 pb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.display_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",s.username]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 leading-tight max-h-[2.4em] overflow-hidden",children:s.bio}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"}),s.subscribers.toLocaleString()," subscribers"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"}),z[s.id]||0," followers"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),G[s.id]||0," likes"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Subscription tiers:"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.tiers.length," option",s.tiers.length!==1?"s":""]})]}),s.tiers.length>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"From"}),e.jsxs("span",{className:"font-semibold text-accent",children:["GHS ",Math.min(...s.tiers.map(t=>t.price)),"/month"]})]}):e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:"No tiers available"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(ae,{to:`/creator/${s.username}`,children:"View Profile"})}),s.tiers.length>0?e.jsxs(p,{className:"w-full",onClick:()=>q(s.display_name,Math.min(...s.tiers.map(t=>t.price))),children:["Subscribe from GHS ",Math.min(...s.tiers.map(t=>t.price)),"/month"]}):e.jsx(p,{variant:"outline",className:"w-full",disabled:!0,children:"No subscription tiers available"})]})]})})]},s.id))}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-muted rounded-full flex items-center justify-center",children:e.jsx(T,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No creators found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters to find creators"})]})]}),c&&e.jsx(oe,{open:D,onOpenChange:w,children:e.jsxs(ne,{className:"sm:max-w-lg max-h-[85vh] flex flex-col",children:[e.jsxs(le,{className:"flex-shrink-0 pb-4",children:[e.jsx(ce,{className:"text-xl font-bold",children:"Choose Your Subscription"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Select a tier to unlock exclusive content from ",c.display_name]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2",children:e.jsxs("div",{className:"space-y-3",children:[(console.log("Tier Selection Modal - selectedCreator:",c),console.log("Tier Selection Modal - selectedCreator.tiers:",c.tiers),null),c.tiers&&c.tiers.length>0?c.tiers.map(s=>{let t=s.benefits||[];if(typeof t=="string")try{t=JSON.parse(t)}catch(r){console.warn("Failed to parse benefits JSON:",r),t=[]}return Array.isArray(t)||(t=[]),e.jsx("div",{className:"p-4 border border-border rounded-xl hover:border-accent/60 cursor-pointer transition-all duration-200 hover:bg-accent/5 hover:shadow-sm group",onClick:()=>V(s),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-foreground group-hover:text-accent transition-colors",children:s.name}),e.jsxs("div",{className:"font-bold text-accent text-lg mt-0.5",children:["GHS ",typeof s.price=="string"?parseFloat(s.price).toFixed(2):s.price.toFixed(2),e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:"/month"})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 rounded-full",style:{backgroundColor:"#262626"},children:"Monthly"})]}),s.description&&e.jsx("div",{className:"bg-muted/30 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:s.description})}),t.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"What's included:"}),e.jsxs("div",{className:"space-y-1.5",children:[t.slice(0,3).map((r,o)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground leading-relaxed",children:r})]},o)),t.length>3&&e.jsxs("div",{className:"text-xs text-muted-foreground pl-3.5",children:["+",t.length-3," more benefits"]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"w-full bg-blue-500/10 group-hover:bg-blue-500 group-hover:text-white text-blue-500 font-medium py-2.5 px-4 rounded-lg text-center transition-all duration-200 text-sm",children:["Select ",s.name," →"]})})]})},s.id)}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No subscription tiers available"})})]})}),e.jsx("div",{className:"flex-shrink-0 pt-4 border-t border-border/50",children:e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"Cancel anytime • Secure payments via Paystack"})})]})}),L&&c&&e.jsx(ue,{isOpen:H,onClose:()=>{_(!1),E(null),P(null)},tier:L,creatorName:c.display_name})]})};export{He as Explore};
