import{i as me,a as he,u as pe,r,j as e,y as W,C as p,d as x,e as u,f as g,g as j,h as t,I as i,aa as P,B as d,S as _,o as xe,aw as ue}from"./index-DnjzDop3.js";import{T as B}from"./textarea-ChWCN1Go.js";import{S as f}from"./separator-Buenz_HF.js";import{T as ge,a as je,b as w,c as v}from"./tabs-Tn3DyEKi.js";import{A as H,b as J,c as V,d as X,e as Y,f as G,g as K,h as Q}from"./alert-dialog-DWgssEGA.js";import{E as Z}from"./eye-off-Bcppvf7W.js";import{E as $}from"./eye-DwXGc38I.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Se=()=>{const{toast:n}=he(),{user:S,updateUser:ee}=pe(),[M,T]=r.useState(!1),[D,k]=r.useState(!1),[R,I]=r.useState(!1),[L,z]=r.useState(!1),[E,se]=r.useState(!1),[F,ae]=r.useState(!1),[te,A]=r.useState(!1),[re,U]=r.useState(!1),[y,O]=r.useState(""),[q,ie]=r.useState((S==null?void 0:S.email)||""),[c,N]=r.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[l,o]=r.useState({siteName:"Xclusive",siteDescription:"Premium content monetization platform",commissionRate:10,minimumAge:18,maintenanceMode:!1,newUserRegistration:!0}),[m,h]=r.useState({autoModeration:!0,requireApproval:!1,bannedWords:"spam, scam, fake",maxFileSize:100,allowedFileTypes:"jpg, png, gif, mp4, pdf"}),[b,C]=r.useState({smtpServer:"smtp.gmail.com",smtpPort:587,smtpUsername:"noreply@xclusive.com",fromEmail:"Xclusive <noreply@xclusive.com>"}),ne=async s=>{s.preventDefault(),T(!0);try{const a=await ue("/api/admin/platform-settings",{method:"PUT",body:JSON.stringify({commission_rate:l.commissionRate/100,site_name:l.siteName,site_description:l.siteDescription,maintenance_mode:l.maintenanceMode,new_user_registration:l.newUserRegistration})});if(a.success)n({title:"Settings Updated",description:"Platform settings have been saved successfully."});else throw new Error(a.message||"Failed to update settings")}catch(a){n({title:"Error",description:a.message||"Failed to update platform settings.",variant:"destructive"})}finally{T(!1)}},le=async s=>{s.preventDefault(),k(!0);try{await new Promise(a=>setTimeout(a,1e3)),n({title:"Moderation settings updated",description:"Content moderation settings have been successfully updated."})}catch{n({title:"Update failed",description:"Failed to update moderation settings. Please try again.",variant:"destructive"})}finally{k(!1)}},de=async s=>{s.preventDefault(),I(!0);try{await new Promise(a=>setTimeout(a,1e3)),n({title:"Email settings updated",description:"Email configuration has been successfully updated."})}catch{n({title:"Update failed",description:"Failed to update email settings. Please try again.",variant:"destructive"})}finally{I(!1)}},ce=async()=>{if(!y){n({title:"Email required",description:"Please enter a new email address.",variant:"destructive"});return}try{await new Promise(s=>setTimeout(s,1e3)),n({title:"Email updated",description:"Your email address has been successfully updated."}),ie(y),ee({email:y}),A(!1),O("")}catch{n({title:"Update failed",description:"Failed to update email. Please try again.",variant:"destructive"})}},oe=async()=>{if(c.newPassword!==c.confirmPassword){n({title:"Password mismatch",description:"New passwords do not match.",variant:"destructive"});return}if(c.newPassword.length<6){n({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}z(!0);try{const s=await fetch("/api/user/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:c.currentPassword,newPassword:c.newPassword})});if(!s.ok){const a=await s.json();throw new Error(a.error||"Failed to change password")}n({title:"Password changed",description:"Your password has been successfully updated."}),N({currentPassword:"",newPassword:"",confirmPassword:""}),U(!1)}catch(s){n({title:"Update failed",description:s instanceof Error?s.message:"Failed to update password. Please try again.",variant:"destructive"})}finally{z(!1)}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8 text-center sm:text-left",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2 flex items-center gap-2 justify-center sm:justify-start",children:[e.jsx(W,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary"}),"Admin Settings"]}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Configure platform settings and policies"})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(ge,{defaultValue:"platform",className:"space-y-6",children:[e.jsxs(je,{children:[e.jsx(w,{value:"platform",children:"Platform"}),e.jsx(w,{value:"moderation",children:"Content"}),e.jsx(w,{value:"email",children:"Email"}),e.jsx(w,{value:"security",children:"Security"}),e.jsx(w,{value:"users",children:"Users"})]}),e.jsx(v,{value:"platform",className:"space-y-6",children:e.jsxs(p,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5"}),"Platform Settings"]}),e.jsx(g,{children:"Configure basic platform information and policies"})]}),e.jsx(j,{className:"space-y-6",children:e.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"siteName",children:"Site Name"}),e.jsx(i,{id:"siteName",value:l.siteName,onChange:s=>o(a=>({...a,siteName:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"commissionRate",children:"Commission Rate (%)"}),e.jsx(i,{id:"commissionRate",type:"number",min:"0",max:"50",value:l.commissionRate,onChange:s=>o(a=>({...a,commissionRate:parseInt(s.target.value)}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"siteDescription",children:"Site Description"}),e.jsx(B,{id:"siteDescription",value:l.siteDescription,onChange:s=>o(a=>({...a,siteDescription:s.target.value})),rows:3})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Temporarily disable the platform for maintenance"})]}),e.jsx(P,{checked:l.maintenanceMode,onCheckedChange:s=>o(a=>({...a,maintenanceMode:s}))})]}),e.jsx(f,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"New User Registration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register accounts"})]}),e.jsx(P,{checked:l.newUserRegistration,onCheckedChange:s=>o(a=>({...a,newUserRegistration:s}))})]})]}),e.jsx(d,{type:"submit",disabled:M,children:M?"Updating...":"Update Platform Settings"})]})})]})}),e.jsx(v,{value:"moderation",className:"space-y-6",children:e.jsxs(p,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Content Moderation"]}),e.jsx(g,{children:"Configure content moderation and safety settings"})]}),e.jsx(j,{className:"space-y-6",children:e.jsxs("form",{onSubmit:le,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Auto Moderation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically flag potentially inappropriate content"})]}),e.jsx(P,{checked:m.autoModeration,onCheckedChange:s=>h(a=>({...a,autoModeration:s}))})]}),e.jsx(f,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(t,{children:"Require Content Approval"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All content must be approved before going live"})]}),e.jsx(P,{checked:m.requireApproval,onCheckedChange:s=>h(a=>({...a,requireApproval:s}))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"bannedWords",children:"Banned Words (comma-separated)"}),e.jsx(B,{id:"bannedWords",value:m.bannedWords,onChange:s=>h(a=>({...a,bannedWords:s.target.value})),rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"maxFileSize",children:"Max File Size (MB)"}),e.jsx(i,{id:"maxFileSize",type:"number",min:"1",max:"1000",value:m.maxFileSize,onChange:s=>h(a=>({...a,maxFileSize:parseInt(s.target.value)}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"allowedFileTypes",children:"Allowed File Types"}),e.jsx(i,{id:"allowedFileTypes",value:m.allowedFileTypes,onChange:s=>h(a=>({...a,allowedFileTypes:s.target.value}))})]})]})]}),e.jsx(d,{type:"submit",disabled:D,children:D?"Saving...":"Save Moderation Settings"})]})})]})}),e.jsx(v,{value:"email",className:"space-y-6",children:e.jsxs(p,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"}),"Email Configuration"]}),e.jsx(g,{children:"Configure SMTP settings for platform emails"})]}),e.jsx(j,{children:e.jsxs("form",{onSubmit:de,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtpServer",children:"SMTP Server"}),e.jsx(i,{id:"smtpServer",value:b.smtpServer,onChange:s=>C(a=>({...a,smtpServer:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtpPort",children:"SMTP Port"}),e.jsx(i,{id:"smtpPort",type:"number",value:b.smtpPort,onChange:s=>C(a=>({...a,smtpPort:parseInt(s.target.value)}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"smtpUsername",children:"SMTP Username"}),e.jsx(i,{id:"smtpUsername",value:b.smtpUsername,onChange:s=>C(a=>({...a,smtpUsername:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"fromEmail",children:"From Email"}),e.jsx(i,{id:"fromEmail",value:b.fromEmail,onChange:s=>C(a=>({...a,fromEmail:s.target.value}))})]})]}),e.jsx(d,{type:"submit",disabled:R,children:R?"Saving...":"Save Email Settings"})]})})]})}),e.jsxs(v,{value:"security",className:"space-y-6",children:[e.jsxs(p,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5"}),"Security Settings"]}),e.jsx(g,{children:"Manage your account security and authentication"})]}),e.jsx(j,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-base font-medium",children:"Email Address"}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:q}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>A(!0),"data-testid":"button-change-email",children:"Change Email"})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"text-base font-medium",children:"Password"}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/20",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"••••••••••••"}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>U(!0),"data-testid":"button-change-password",children:"Change Password"})]})]})]})})]}),e.jsx(H,{open:te,onOpenChange:A,children:e.jsxs(J,{children:[e.jsxs(V,{children:[e.jsx(X,{children:"Change Email Address"}),e.jsx(Y,{children:"Please enter your new email address below."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"current-email",children:"Current Email"}),e.jsx(i,{id:"current-email",value:q,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"new-email",children:"New Email"}),e.jsx(i,{id:"new-email",type:"email",placeholder:"Enter new email",value:y,onChange:s=>O(s.target.value),"data-testid":"input-new-email"})]})]}),e.jsxs(G,{children:[e.jsx(K,{children:"Cancel"}),e.jsx(Q,{onClick:ce,"data-testid":"button-confirm-email-change",children:"Update Email"})]})]})}),e.jsx(H,{open:re,onOpenChange:U,children:e.jsxs(J,{children:[e.jsxs(V,{children:[e.jsx(X,{children:"Change Password"}),e.jsx(Y,{children:"Enter your current password and choose a new one."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"current-password",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"current-password",type:E?"text":"password",placeholder:"Enter current password",value:c.currentPassword,onChange:s=>N(a=>({...a,currentPassword:s.target.value})),"data-testid":"input-current-password"}),e.jsx(d,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>se(!E),children:E?e.jsx(Z,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"new-password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{id:"new-password",type:F?"text":"password",placeholder:"Enter new password",value:c.newPassword,onChange:s=>N(a=>({...a,newPassword:s.target.value})),"data-testid":"input-new-password"}),e.jsx(d,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>ae(!F),children:F?e.jsx(Z,{className:"h-4 w-4"}):e.jsx($,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"confirm-password",children:"Confirm New Password"}),e.jsx(i,{id:"confirm-password",type:"password",placeholder:"Confirm new password",value:c.confirmPassword,onChange:s=>N(a=>({...a,confirmPassword:s.target.value})),"data-testid":"input-confirm-password"})]})]}),e.jsxs(G,{children:[e.jsx(K,{children:"Cancel"}),e.jsx(Q,{onClick:oe,disabled:L,"data-testid":"button-confirm-password-change",children:L?"Updating...":"Change Password"})]})]})})]}),e.jsx(v,{value:"users",className:"space-y-6",children:e.jsxs(p,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5"}),"User Management"]}),e.jsx(g,{children:"Configure user-related settings and policies"})]}),e.jsx(j,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"minimumAge",children:"Minimum Age"}),e.jsx(i,{id:"minimumAge",type:"number",min:"13",max:"21",value:l.minimumAge,onChange:s=>o(a=>({...a,minimumAge:parseInt(s.target.value)}))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum age required to create an account"})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"User Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-muted/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"1,234"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Creators"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"456"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/20",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:"89"})]})]})]}),e.jsx(f,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"User Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{variant:"outline",className:"w-full",children:"Export User Data"}),e.jsx(d,{variant:"outline",className:"w-full",children:"Send Platform Announcement"}),e.jsx(d,{variant:"outline",className:"w-full",children:"Generate User Report"})]})]})]})})]})})]})})]})})};export{Se as AdminSettings};
