import{i as P,r as w,a as A,j as e,C as n,d as x,e as h,g as l,h as S,I as M,B as d,u as R,a8 as y,o as L,k as F,f as C,L as c,l as T,a1 as E,y as I}from"./index-DnjzDop3.js";import{P as k}from"./progress-CdD86Rs-.js";import{E as _}from"./EdgeToEdgeContainer-kS07pzFb.js";import{T as z}from"./textarea-ChWCN1Go.js";import{S as D,a as W,b as B,c as q,d as p}from"./select-BgAE-lOE.js";import{S as U}from"./send-Baqb8pKh.js";import{D as K}from"./dollar-sign-CzBPYBMC.js";import{T as V}from"./triangle-alert-Dv17xG_Y.js";import{F as O}from"./file-text-CmNfjj7m.js";import{P as G}from"./palette-DQH6SLVE.js";import{F as Z}from"./flag-D_PcH8BI.js";import"./chevron-up-CD9nw7va.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=P("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=P("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),$=()=>{const[u,j]=w.useState(!1),[r,g]=w.useState(""),[f,N]=w.useState(""),[b,s]=w.useState("test"),{toast:o}=A(),i=async()=>{if(!r.trim()||!f.trim()){o({title:"Error",description:"Please fill in both title and message",variant:"destructive"});return}j(!0);try{if(!(await fetch("/api/test-realtime-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:b,title:r,message:f})})).ok)throw new Error("Failed to send notification");o({title:"Success",description:"Real-time notification sent successfully!"}),g(""),N(""),s("test")}catch(a){console.error("Error sending test notification:",a),o({title:"Error",description:"Failed to send test notification",variant:"destructive"})}finally{j(!1)}},v=async()=>{j(!0);try{const a=await fetch("/api/test-notifications",{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to send bulk notifications");const t=await a.json();o({title:"Success",description:`${t.count} test notifications sent successfully!`})}catch(a){console.error("Error sending bulk test notifications:",a),o({title:"Error",description:"Failed to send bulk test notifications",variant:"destructive"})}finally{j(!1)}};return e.jsxs(n,{className:"w-full max-w-2xl",children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Real-time Notification Tester"]})}),e.jsxs(l,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-center sm:text-left",children:"Send Custom Notification"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notification-type",children:"Notification Type"}),e.jsxs(D,{value:b,onValueChange:s,children:[e.jsx(W,{children:e.jsx(B,{placeholder:"Select notification type"})}),e.jsxs(q,{children:[e.jsx(p,{value:"test",children:"Test"}),e.jsx(p,{value:"new_subscriber",children:"New Subscriber"}),e.jsx(p,{value:"new_message",children:"New Message"}),e.jsx(p,{value:"new_post",children:"New Post"}),e.jsx(p,{value:"payment_success",children:"Payment Success"}),e.jsx(p,{value:"like",children:"Like"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notification-title",children:"Title"}),e.jsx(M,{id:"notification-title",value:r,onChange:a=>g(a.target.value),placeholder:"Enter notification title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"notification-message",children:"Message"}),e.jsx(z,{id:"notification-message",value:f,onChange:a=>N(a.target.value),placeholder:"Enter notification message",rows:3})]}),e.jsxs(d,{onClick:i,disabled:u,className:"w-full",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Send Real-time Notification"]})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-center sm:text-left",children:"Send Bulk Test Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center sm:text-left",children:"This will send multiple pre-defined test notifications to demonstrate different notification types."}),e.jsxs(d,{onClick:v,disabled:u,variant:"outline",className:"w-full",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Send Bulk Test Notifications"]})]})}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-center sm:text-left",children:"Instructions"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Notifications will be sent in real-time via WebSocket"}),e.jsx("li",{children:"• Browser push notifications will appear if permission is granted"}),e.jsx("li",{children:"• Toast notifications will show for active users"}),e.jsx("li",{children:"• Check the notification bell icon for unread count updates"})]})]})]})]})},ce=()=>{const{user:u}=R(),{data:j,isLoading:r}=y({queryKey:["/api/admin/platform-stats"],refetchInterval:3e4}),{data:g,isLoading:f}=y({queryKey:["/api/admin/top-creators"],refetchInterval:6e4}),{data:N,isLoading:b}=y({queryKey:["/api/reports"],refetchInterval:3e4}),{data:s,isLoading:o}=y({queryKey:["/api/admin/system-health"],refetchInterval:3e4}),i=j||{totalUsers:0,totalCreators:0,totalFans:0,monthlyRevenue:0,platformFees:0,activeSubscriptions:0,contentModeration:{pending:0,approved:0,rejected:0}},v=Array.isArray(g)?g:[],a=Array.isArray(N)?N.slice(0,3):[];return e.jsxs(_,{children:[e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-red-500/5 to-primary/10 border-b border-border",children:e.jsx(_,{maxWidth:"7xl",enablePadding:!0,enableTopPadding:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-foreground",children:"Admin Dashboard"})}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Welcome back, ",u==null?void 0:u.username,"! Platform overview and management tools"]})]})})}),e.jsx(_,{maxWidth:"7xl",enablePadding:!0,className:"py-6 sm:py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-4 grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(n,{className:"bg-gradient-card border-border/50",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),r?e.jsx("div",{className:"h-8 w-20 bg-muted animate-pulse rounded"}):e.jsx("p",{className:"text-2xl font-bold text-foreground",children:i.totalUsers.toLocaleString()}),e.jsx("p",{className:"text-xs text-success",children:"Real-time data"})]}),e.jsx(L,{className:"h-8 w-8 text-primary",strokeWidth:1})]})})}),e.jsx(n,{className:"bg-gradient-card border-border/50",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Platform Revenue"}),r?e.jsx("div",{className:"h-8 w-24 bg-muted animate-pulse rounded"}):e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:["GHS ",i.platformFees.toLocaleString()]}),e.jsx("p",{className:"text-xs text-success",children:"15% commission"})]}),e.jsx(K,{className:"h-8 w-8 text-accent",strokeWidth:1})]})})}),e.jsx(n,{className:"bg-gradient-card border-border/50",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Creators"}),r?e.jsx("div",{className:"h-8 w-16 bg-muted animate-pulse rounded"}):e.jsx("p",{className:"text-2xl font-bold text-foreground",children:i.totalCreators.toLocaleString()}),e.jsx("p",{className:"text-xs text-success",children:"Live count"})]}),e.jsx(F,{className:"h-8 w-8 text-accent",strokeWidth:1})]})})}),e.jsx(n,{className:"bg-gradient-card border-border/50",children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Reports"}),r?e.jsx("div",{className:"h-8 w-12 bg-muted animate-pulse rounded"}):e.jsx("p",{className:"text-2xl font-bold text-foreground",children:i.contentModeration.pending}),e.jsx("p",{className:"text-xs text-warning",children:"Needs attention"})]}),e.jsx(V,{className:"h-8 w-8 text-warning",strokeWidth:1})]})})})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[e.jsxs(n,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{className:"text-center sm:text-left",children:[e.jsx(h,{children:"Admin Actions"}),e.jsx(C,{children:"Manage platform operations"})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(d,{size:"lg",className:"h-20 flex-col gap-3 px-4",asChild:!0,children:e.jsxs(c,{to:"/admin/users",children:[e.jsx(L,{className:"w-6 h-6"}),"Manage Users"]})}),e.jsx(d,{variant:"outline",size:"lg",className:"h-20 flex-col gap-3 px-4",asChild:!0,children:e.jsxs(c,{to:"/admin/content",children:[e.jsx(O,{className:"w-6 h-6"}),"Review Content"]})}),e.jsx(d,{variant:"outline",size:"lg",className:"h-20 flex-col gap-3 px-4",asChild:!0,children:e.jsxs(c,{to:"/admin/categories",children:[e.jsx(G,{className:"w-6 h-6"}),"Categories"]})}),e.jsx(d,{variant:"outline",size:"lg",className:"h-20 flex-col gap-3 px-4 relative",asChild:!0,children:e.jsxs(c,{to:"/admin/reports",children:[e.jsx(Z,{className:"w-6 h-6"}),"Reports",i.contentModeration.pending>0&&e.jsx(T,{variant:"destructive",className:"absolute -top-2 -right-2 px-2 py-1 text-xs",children:i.contentModeration.pending})]})}),e.jsx(d,{variant:"outline",size:"lg",className:"h-20 flex-col gap-3 px-4",asChild:!0,children:e.jsxs(c,{to:"/admin/analytics",children:[e.jsx(E,{className:"w-6 h-6"}),"Analytics"]})})]})})]}),e.jsxs(n,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{className:"text-center sm:text-left",children:[e.jsx(h,{children:"Content Moderation"}),e.jsx(C,{children:"Review status and pending items"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg border border-border/50",children:[r?e.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded mx-auto mb-2"}):e.jsx("p",{className:"text-2xl font-bold text-warning",children:i.contentModeration.pending}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending Review"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg border border-border/50",children:[r?e.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded mx-auto mb-2"}):e.jsx("p",{className:"text-2xl font-bold text-success",children:i.contentModeration.approved}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg border border-border/50",children:[r?e.jsx("div",{className:"h-8 w-8 bg-muted animate-pulse rounded mx-auto mb-2"}):e.jsx("p",{className:"text-2xl font-bold text-destructive",children:i.contentModeration.rejected}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"})]})]}),e.jsx(d,{variant:"outline",className:"w-full",asChild:!0,children:e.jsx(c,{to:"/admin/content",children:"Review Pending Content"})})]})]}),e.jsxs(n,{className:"bg-gradient-card border-border/50",children:[e.jsxs(x,{className:"text-center sm:text-left",children:[e.jsx(h,{children:"Top Performing Creators"}),e.jsx(C,{children:"Highest earning creators this month"})]}),e.jsx(l,{className:"space-y-4",children:f?Array.from({length:3}).map((t,m)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-muted animate-pulse rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 w-24 bg-muted animate-pulse rounded mb-1"}),e.jsx("div",{className:"h-3 w-16 bg-muted animate-pulse rounded"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"h-4 w-20 bg-muted animate-pulse rounded mb-1"}),e.jsx("div",{className:"h-3 w-16 bg-muted animate-pulse rounded"})]})]},m)):v.length>0?v.map((t,m)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground font-bold",children:m+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.display_name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.username]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium",children:["GHS ",t.monthly_revenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.subscribers," subscribers"]}),e.jsx(T,{variant:t.status==="verified"?"default":"outline",children:t.status})]})]})]},t.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No creator data available yet"})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{className:"bg-gradient-card border-border/50",children:[e.jsx(x,{className:"text-center sm:text-left",children:e.jsx(h,{className:"text-lg",children:"Recent Reports"})}),e.jsxs(l,{className:"space-y-3",children:[b?Array.from({length:3}).map((t,m)=>e.jsxs("div",{className:"p-3 rounded-lg border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-4 w-16 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-3 w-12 bg-muted animate-pulse rounded"})]}),e.jsx("div",{className:"h-4 w-full bg-muted animate-pulse rounded mb-1"}),e.jsx("div",{className:"h-3 w-20 bg-muted animate-pulse rounded"})]},m)):a.length>0?a.map(t=>e.jsxs("div",{className:"p-3 rounded-lg border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(T,{variant:t.status==="pending"?"destructive":t.status==="under_review"?"secondary":"default",children:t.status.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm font-medium",children:t.reason}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Target: ",t.target_name||t.target_id]})]},t.id)):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No recent reports"}),e.jsx(d,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsx(c,{to:"/admin/reports",children:"View All Reports"})})]})]}),e.jsxs(n,{className:"bg-gradient-card border-border/50",children:[e.jsx(x,{className:"text-center sm:text-left",children:e.jsx(h,{className:"text-lg",children:"System Health"})}),e.jsx(l,{className:"space-y-4",children:o?Array.from({length:3}).map((t,m)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"}),e.jsx("div",{className:"h-4 w-8 bg-muted animate-pulse rounded"})]}),e.jsx("div",{className:"h-2 w-full bg-muted animate-pulse rounded"})]},m)):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Server Performance"}),e.jsxs("span",{children:[(s==null?void 0:s.server_performance)||0,"%"]})]}),e.jsx(k,{value:(s==null?void 0:s.server_performance)||0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Database Health"}),e.jsxs("span",{children:[(s==null?void 0:s.database_health)||0,"%"]})]}),e.jsx(k,{value:(s==null?void 0:s.database_health)||0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"API Response Time"}),e.jsxs("span",{children:[(s==null?void 0:s.api_response_time)||0,"ms"]})]}),e.jsx(k,{value:Math.min((1e3-((s==null?void 0:s.api_response_time)||1e3))/10,100),className:"h-2"})]})]})})]}),e.jsxs(n,{className:"bg-gradient-card border-border/50",children:[e.jsx(x,{className:"text-center sm:text-left",children:e.jsx(h,{className:"text-lg",children:"Platform Settings"})}),e.jsxs(l,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 text-center sm:text-left",children:"Configure platform-wide settings and policies"}),e.jsx(d,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs(c,{to:"/admin/settings",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Manage Settings"]})})]})]}),e.jsx($,{})]})]})})]})};export{ce as AdminDashboard};
