import{a8 as x,j as s}from"./index-DnjzDop3.js";const m=t=>[`/api/users/${t}/online-status`],b=({userId:t,showLastSeen:o=!1,size:f="sm",dotOnly:d=!1,isOwnProfile:h=!1})=>{const{data:e,error:w,isLoading:p}=x({queryKey:m(t),queryFn:async()=>{const r=await fetch(`/api/users/${t}/online-status`);if(!r.ok)throw new Error("Failed to fetch online status");return r.json()},refetchInterval:3e4,staleTime:5e3,enabled:!!t});if(!(e!=null&&e.activity_status_visible))return null;const g=r=>{if(!r)return"";const l=new Date(r),a=new Date().getTime()-l.getTime(),i=Math.floor(a/(1e3*60)),u=Math.floor(a/(1e3*60*60)),c=Math.floor(a/(1e3*60*60*24));return i<1?"Just now":i<60?`${i}m ago`:u<24?`${u}h ago`:c<7?`${c}d ago`:l.toLocaleDateString()},n=()=>{switch(f){case"xs":return"w-2 h-2";case"sm":return"w-2.5 h-2.5";case"md":return"w-3 h-3";case"lg":return"w-4 h-4";default:return"w-2 h-2"}};return d?e!=null&&e.is_online?s.jsx("div",{className:`${n()} rounded-full bg-green-500 border-2 border-background shadow-lg absolute z-30`,style:{bottom:"3px",right:"3px"}}):null:e!=null&&e.is_online?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:`${n()} rounded-full bg-green-500 animate-pulse`}),s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"Online"}),o&&s.jsx("span",{className:"text-xs text-muted-foreground",children:"â€¢ Active now"})]}):o&&(e!=null&&e.last_seen)?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:`${n()} rounded-full bg-gray-400`}),s.jsx("span",{className:"text-xs text-muted-foreground",children:g(e.last_seen)})]}):null};export{b as O,m as g};
