import{r as i,u as A,a as C,b as L,j as e,L as f,C as P,d as k,S as I,e as D,f as z,g as R,h as g,I as j,B as b}from"./index-DnjzDop3.js";import{E as T}from"./eye-off-Bcppvf7W.js";import{E as q}from"./eye-DwXGc38I.js";const H=()=>{const[o,v]=i.useState(""),[c,y]=i.useState(""),[d,N]=i.useState(!1),[m,u]=i.useState(!1),{user:n,login:w,isLoading:l}=A(),{toast:t}=C(),r=L();i.useEffect(()=>{if(!l&&n)if(n.role==="admin")r("/admin/dashboard");else{const s=n.role==="creator"?"/creator/dashboard":"/fan/dashboard";r(s),t({title:"Access Denied",description:"Admin access is restricted to authorized personnel only.",variant:"destructive"})}},[n,l,r,t]);const E=async s=>{var h,x;s.preventDefault(),u(!0);try{await w(o,c);const a=await fetch("/api/auth/verify",{credentials:"include"});if(a.ok){const p=await a.json();if(((h=p.user)==null?void 0:h.role)==="admin")t({title:"Welcome Admin",description:"Successfully logged into admin panel."}),r("/admin/dashboard");else{t({title:"Access Denied",description:"This account does not have admin privileges.",variant:"destructive"});const S=((x=p.user)==null?void 0:x.role)==="creator"?"/creator/dashboard":"/fan/dashboard";r(S)}}}catch(a){console.error("Admin login error:",a),t({title:"Login failed",description:a instanceof Error?a.message:"Invalid credentials",variant:"destructive"})}finally{u(!1)}};return l?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs(f,{to:"/",className:"inline-flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-primary rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-primary-foreground font-bold text-xl",children:"X"})}),e.jsx("span",{className:"text-2xl font-bold text-gradient-primary",children:"Xclusive"})]})}),e.jsxs(P,{className:"bg-gradient-card border-border/50",children:[e.jsxs(k,{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-500 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"w-6 h-6 text-white"})}),e.jsx(D,{className:"text-2xl",children:"Admin Access"}),e.jsx(z,{children:"Authorized personnel only"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"admin-email",children:"Email"}),e.jsx(j,{id:"admin-email",type:"email",placeholder:"Enter your admin email",value:o,onChange:s=>v(s.target.value),required:!0,"data-testid":"input-admin-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"admin-password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{id:"admin-password",type:d?"text":"password",placeholder:"Enter your admin password",value:c,onChange:s=>y(s.target.value),required:!0,"data-testid":"input-admin-password"}),e.jsx(b,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>N(!d),"data-testid":"button-toggle-password",children:d?e.jsx(T,{className:"h-4 w-4"}):e.jsx(q,{className:"h-4 w-4"})})]})]}),e.jsx(b,{type:"submit",className:"w-full",disabled:m,"data-testid":"button-admin-login",children:m?"Signing in...":"Admin Sign In"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Return to"," ",e.jsx(f,{to:"/login",className:"text-blue-500 hover:underline font-medium",children:"Regular Login"})]})})]})]})]})})};export{H as AdminLogin};
