import{T as Ze,r as l,V as X,W as Je,j as e,P as q,Y as se,Z as I,_ as U,$ as et,a0 as _e,B as C,L as A,a1 as ke,o as de,M as me,u as Le,a as tt,a2 as st,a3 as rt,a4 as at,a5 as nt,a6 as ot,D as lt,p as it,q as ct,s as dt,X as mt,I as ut,h as ht,a7 as xt,a8 as ft,C as k,g as L,d as V,e as G,f as pt,l as O,A as gt,m as bt,n as vt,y as ve,U as jt}from"./index-DnjzDop3.js";import{P as Q}from"./progress-CdD86Rs-.js";import{e as wt,S as Nt,a as St,b as yt,c as Ct,d as je}from"./select-BgAE-lOE.js";import{E as ie}from"./EdgeToEdgeContainer-kS07pzFb.js";import{F as B}from"./file-text-CmNfjj7m.js";import{D as Ae}from"./dollar-sign-CzBPYBMC.js";import{T as De}from"./trending-up-BqdnV6XC.js";import{o as Pt,s as we,u as Et,t as Tt,F as Rt,a as Ne,b as Se,c as ye,d as Ce,e as _t}from"./form-ZwPv4Ajc.js";import{T as kt}from"./textarea-ChWCN1Go.js";import{P as Me}from"./plus-9blh9VHl.js";import{C as J}from"./clock-DLXk1hVQ.js";import{S as Lt}from"./send-Baqb8pKh.js";import{H as ce}from"./heart-BIzJO6uv.js";import{C as Pe}from"./calendar-We5RV4OF.js";import{I as K}from"./image-DUscFDhE.js";import{V as Z}from"./video-DbSLhckN.js";import{E as Ee}from"./eye-DwXGc38I.js";import"./chevron-up-CD9nw7va.js";function At(t,r){return l.useReducer((a,n)=>r[a][n]??a,t)}var he="ScrollArea",[He,ps]=Ze(he),[Dt,_]=He(he),ze=l.forwardRef((t,r)=>{const{__scopeScrollArea:a,type:n="hover",dir:o,scrollHideDelay:i=600,...m}=t,[c,u]=l.useState(null),[p,x]=l.useState(null),[h,g]=l.useState(null),[b,y]=l.useState(null),[P,D]=l.useState(null),[E,H]=l.useState(0),[s,w]=l.useState(0),[v,d]=l.useState(!1),[f,R]=l.useState(!1),j=X(r,z=>u(z)),T=Je(o);return e.jsx(Dt,{scope:a,type:n,dir:T,scrollHideDelay:i,scrollArea:c,viewport:p,onViewportChange:x,content:h,onContentChange:g,scrollbarX:b,onScrollbarXChange:y,scrollbarXEnabled:v,onScrollbarXEnabledChange:d,scrollbarY:P,onScrollbarYChange:D,scrollbarYEnabled:f,onScrollbarYEnabledChange:R,onCornerWidthChange:H,onCornerHeightChange:w,children:e.jsx(q.div,{dir:T,...m,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":s+"px",...t.style}})})});ze.displayName=he;var Fe="ScrollAreaViewport",We=l.forwardRef((t,r)=>{const{__scopeScrollArea:a,children:n,nonce:o,...i}=t,m=_(Fe,a),c=l.useRef(null),u=X(r,c,m.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(q.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:m.scrollbarXEnabled?"scroll":"hidden",overflowY:m.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:m.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});We.displayName=Fe;var M="ScrollAreaScrollbar",xe=l.forwardRef((t,r)=>{const{forceMount:a,...n}=t,o=_(M,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:m}=o,c=t.orientation==="horizontal";return l.useEffect(()=>(c?i(!0):m(!0),()=>{c?i(!1):m(!1)}),[c,i,m]),o.type==="hover"?e.jsx(Mt,{...n,ref:r,forceMount:a}):o.type==="scroll"?e.jsx(Ht,{...n,ref:r,forceMount:a}):o.type==="auto"?e.jsx(Ue,{...n,ref:r,forceMount:a}):o.type==="always"?e.jsx(fe,{...n,ref:r}):null});xe.displayName=M;var Mt=l.forwardRef((t,r)=>{const{forceMount:a,...n}=t,o=_(M,t.__scopeScrollArea),[i,m]=l.useState(!1);return l.useEffect(()=>{const c=o.scrollArea;let u=0;if(c){const p=()=>{window.clearTimeout(u),m(!0)},x=()=>{u=window.setTimeout(()=>m(!1),o.scrollHideDelay)};return c.addEventListener("pointerenter",p),c.addEventListener("pointerleave",x),()=>{window.clearTimeout(u),c.removeEventListener("pointerenter",p),c.removeEventListener("pointerleave",x)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(se,{present:a||i,children:e.jsx(Ue,{"data-state":i?"visible":"hidden",...n,ref:r})})}),Ht=l.forwardRef((t,r)=>{const{forceMount:a,...n}=t,o=_(M,t.__scopeScrollArea),i=t.orientation==="horizontal",m=ae(()=>u("SCROLL_END"),100),[c,u]=At("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(c==="idle"){const p=window.setTimeout(()=>u("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(p)}},[c,o.scrollHideDelay,u]),l.useEffect(()=>{const p=o.viewport,x=i?"scrollLeft":"scrollTop";if(p){let h=p[x];const g=()=>{const b=p[x];h!==b&&(u("SCROLL"),m()),h=b};return p.addEventListener("scroll",g),()=>p.removeEventListener("scroll",g)}},[o.viewport,i,u,m]),e.jsx(se,{present:a||c!=="hidden",children:e.jsx(fe,{"data-state":c==="hidden"?"hidden":"visible",...n,ref:r,onPointerEnter:I(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:I(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),Ue=l.forwardRef((t,r)=>{const a=_(M,t.__scopeScrollArea),{forceMount:n,...o}=t,[i,m]=l.useState(!1),c=t.orientation==="horizontal",u=ae(()=>{if(a.viewport){const p=a.viewport.offsetWidth<a.viewport.scrollWidth,x=a.viewport.offsetHeight<a.viewport.scrollHeight;m(c?p:x)}},10);return Y(a.viewport,u),Y(a.content,u),e.jsx(se,{present:n||i,children:e.jsx(fe,{"data-state":i?"visible":"hidden",...o,ref:r})})}),fe=l.forwardRef((t,r)=>{const{orientation:a="vertical",...n}=t,o=_(M,t.__scopeScrollArea),i=l.useRef(null),m=l.useRef(0),[c,u]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=Be(c.viewport,c.content),x={...n,sizes:c,onSizesChange:u,hasThumb:p>0&&p<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>m.current=0,onThumbPointerDown:g=>m.current=g};function h(g,b){return Vt(g,m.current,c,b)}return a==="horizontal"?e.jsx(zt,{...x,ref:r,onThumbPositionChange:()=>{if(o.viewport&&i.current){const g=o.viewport.scrollLeft,b=Te(g,c,o.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:g=>{o.viewport&&(o.viewport.scrollLeft=g)},onDragScroll:g=>{o.viewport&&(o.viewport.scrollLeft=h(g,o.dir))}}):a==="vertical"?e.jsx(Ft,{...x,ref:r,onThumbPositionChange:()=>{if(o.viewport&&i.current){const g=o.viewport.scrollTop,b=Te(g,c);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:g=>{o.viewport&&(o.viewport.scrollTop=g)},onDragScroll:g=>{o.viewport&&(o.viewport.scrollTop=h(g))}}):null}),zt=l.forwardRef((t,r)=>{const{sizes:a,onSizesChange:n,...o}=t,i=_(M,t.__scopeScrollArea),[m,c]=l.useState(),u=l.useRef(null),p=X(r,u,i.onScrollbarXChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),e.jsx(Ve,{"data-orientation":"horizontal",...o,ref:p,sizes:a,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":re(a)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,h)=>{if(i.viewport){const g=i.viewport.scrollLeft+x.deltaX;t.onWheelScroll(g),Xe(g,h)&&x.preventDefault()}},onResize:()=>{u.current&&i.viewport&&m&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:te(m.paddingLeft),paddingEnd:te(m.paddingRight)}})}})}),Ft=l.forwardRef((t,r)=>{const{sizes:a,onSizesChange:n,...o}=t,i=_(M,t.__scopeScrollArea),[m,c]=l.useState(),u=l.useRef(null),p=X(r,u,i.onScrollbarYChange);return l.useEffect(()=>{u.current&&c(getComputedStyle(u.current))},[u]),e.jsx(Ve,{"data-orientation":"vertical",...o,ref:p,sizes:a,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":re(a)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,h)=>{if(i.viewport){const g=i.viewport.scrollTop+x.deltaY;t.onWheelScroll(g),Xe(g,h)&&x.preventDefault()}},onResize:()=>{u.current&&i.viewport&&m&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:te(m.paddingTop),paddingEnd:te(m.paddingBottom)}})}})}),[Wt,Ie]=He(M),Ve=l.forwardRef((t,r)=>{const{__scopeScrollArea:a,sizes:n,hasThumb:o,onThumbChange:i,onThumbPointerUp:m,onThumbPointerDown:c,onThumbPositionChange:u,onDragScroll:p,onWheelScroll:x,onResize:h,...g}=t,b=_(M,a),[y,P]=l.useState(null),D=X(r,j=>P(j)),E=l.useRef(null),H=l.useRef(""),s=b.viewport,w=n.content-n.viewport,v=U(x),d=U(u),f=ae(h,10);function R(j){if(E.current){const T=j.clientX-E.current.left,z=j.clientY-E.current.top;p({x:T,y:z})}}return l.useEffect(()=>{const j=T=>{const z=T.target;(y==null?void 0:y.contains(z))&&v(T,w)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[s,y,w,v]),l.useEffect(d,[n,d]),Y(y,f),Y(b.content,f),e.jsx(Wt,{scope:a,scrollbar:y,hasThumb:o,onThumbChange:U(i),onThumbPointerUp:U(m),onThumbPositionChange:d,onThumbPointerDown:U(c),children:e.jsx(q.div,{...g,ref:D,style:{position:"absolute",...g.style},onPointerDown:I(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),E.current=y.getBoundingClientRect(),H.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),R(j))}),onPointerMove:I(t.onPointerMove,R),onPointerUp:I(t.onPointerUp,j=>{const T=j.target;T.hasPointerCapture(j.pointerId)&&T.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=H.current,b.viewport&&(b.viewport.style.scrollBehavior=""),E.current=null})})})}),ee="ScrollAreaThumb",Ge=l.forwardRef((t,r)=>{const{forceMount:a,...n}=t,o=Ie(ee,t.__scopeScrollArea);return e.jsx(se,{present:a||o.hasThumb,children:e.jsx(Ut,{ref:r,...n})})}),Ut=l.forwardRef((t,r)=>{const{__scopeScrollArea:a,style:n,...o}=t,i=_(ee,a),m=Ie(ee,a),{onThumbPositionChange:c}=m,u=X(r,h=>m.onThumbChange(h)),p=l.useRef(void 0),x=ae(()=>{p.current&&(p.current(),p.current=void 0)},100);return l.useEffect(()=>{const h=i.viewport;if(h){const g=()=>{if(x(),!p.current){const b=Gt(h,c);p.current=b,c()}};return c(),h.addEventListener("scroll",g),()=>h.removeEventListener("scroll",g)}},[i.viewport,x,c]),e.jsx(q.div,{"data-state":m.hasThumb?"visible":"hidden",...o,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:I(t.onPointerDownCapture,h=>{const b=h.target.getBoundingClientRect(),y=h.clientX-b.left,P=h.clientY-b.top;m.onThumbPointerDown({x:y,y:P})}),onPointerUp:I(t.onPointerUp,m.onThumbPointerUp)})});Ge.displayName=ee;var pe="ScrollAreaCorner",Oe=l.forwardRef((t,r)=>{const a=_(pe,t.__scopeScrollArea),n=!!(a.scrollbarX&&a.scrollbarY);return a.type!=="scroll"&&n?e.jsx(It,{...t,ref:r}):null});Oe.displayName=pe;var It=l.forwardRef((t,r)=>{const{__scopeScrollArea:a,...n}=t,o=_(pe,a),[i,m]=l.useState(0),[c,u]=l.useState(0),p=!!(i&&c);return Y(o.scrollbarX,()=>{var h;const x=((h=o.scrollbarX)==null?void 0:h.offsetHeight)||0;o.onCornerHeightChange(x),u(x)}),Y(o.scrollbarY,()=>{var h;const x=((h=o.scrollbarY)==null?void 0:h.offsetWidth)||0;o.onCornerWidthChange(x),m(x)}),p?e.jsx(q.div,{...n,ref:r,style:{width:i,height:c,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function te(t){return t?parseInt(t,10):0}function Be(t,r){const a=t/r;return isNaN(a)?0:a}function re(t){const r=Be(t.viewport,t.content),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-a)*r;return Math.max(n,18)}function Vt(t,r,a,n="ltr"){const o=re(a),i=o/2,m=r||i,c=o-m,u=a.scrollbar.paddingStart+m,p=a.scrollbar.size-a.scrollbar.paddingEnd-c,x=a.content-a.viewport,h=n==="ltr"?[0,x]:[x*-1,0];return Ye([u,p],h)(t)}function Te(t,r,a="ltr"){const n=re(r),o=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,i=r.scrollbar.size-o,m=r.content-r.viewport,c=i-n,u=a==="ltr"?[0,m]:[m*-1,0],p=wt(t,u);return Ye([0,m],[0,c])(p)}function Ye(t,r){return a=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(t[1]-t[0]);return r[0]+n*(a-t[0])}}function Xe(t,r){return t>0&&t<r}var Gt=(t,r=()=>{})=>{let a={left:t.scrollLeft,top:t.scrollTop},n=0;return function o(){const i={left:t.scrollLeft,top:t.scrollTop},m=a.left!==i.left,c=a.top!==i.top;(m||c)&&r(),a=i,n=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(n)};function ae(t,r){const a=U(t),n=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(n.current),[]),l.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(a,r)},[a,r])}function Y(t,r){const a=U(r);et(()=>{let n=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(a)});return o.observe(t),()=>{window.cancelAnimationFrame(n),o.unobserve(t)}}},[t,a])}var $e=ze,Ot=We,Bt=Oe;const ue=l.forwardRef(({className:t,children:r,...a},n)=>e.jsxs($e,{ref:n,className:_e("relative overflow-hidden",t),...a,children:[e.jsx(Ot,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(qe,{}),e.jsx(Bt,{})]}));ue.displayName=$e.displayName;const qe=l.forwardRef(({className:t,orientation:r="vertical",...a},n)=>e.jsx(xe,{ref:n,orientation:r,className:_e("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:e.jsx(Ge,{className:"relative flex-1 rounded-full bg-border"})}));qe.displayName=xe.displayName;const Yt=()=>{const t=[{to:"/creator/manage-content",icon:e.jsx(B,{className:"w-6 h-6 sm:w-8 sm:h-8"}),label:"Manage Content",variant:"premium"},{to:"/creator/analytics",icon:e.jsx(ke,{className:"w-6 h-6 sm:w-8 sm:h-8"}),label:"View Analytics",variant:"outline"},{to:"/creator/subscribers",icon:e.jsx(de,{className:"w-6 h-6 sm:w-8 sm:h-8"}),label:"Manage Subscribers",variant:"outline"},{to:"/creator/tiers",icon:e.jsx(Ae,{className:"w-6 h-6 sm:w-8 sm:h-8"}),label:"Manage Tiers",variant:"outline"},{to:"/creator/messages",icon:e.jsx(me,{className:"w-6 h-6 sm:w-8 sm:h-8"}),label:"Messages",variant:"outline"},{to:"/creator/earnings",icon:e.jsx(De,{className:"w-6 h-6 sm:w-8 sm:h-8"}),label:"Earnings",variant:"outline"}];return e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:t.map(r=>e.jsx(C,{asChild:!0,variant:r.variant,className:"h-auto p-4 sm:p-6",children:e.jsxs(A,{to:r.to,className:"flex flex-col items-center gap-2",children:[r.icon,e.jsx("span",{className:"text-xs sm:text-sm text-center",children:r.label})]})},r.to))})},Xt=16*1024*1024,$t=["image/jpeg","image/jpg","image/png","image/gif"],qt=["video/mp4","video/mov"],Qt=Pt({caption:we().min(1,"Caption is required").refine(t=>t.trim().length>0,"Caption cannot be empty"),accessTier:we().min(1,"Please select who can see this post")}),Kt=({isOpen:t,onClose:r,onPostCreated:a})=>{const{user:n}=Le(),{toast:o}=tt(),i=st(),[m,c]=l.useState(null),[u,p]=l.useState(null),[x,h]=l.useState(null),[g,b]=l.useState([]),[y,P]=l.useState(!1),[D,E]=l.useState(!1),[H,s]=l.useState([]),[w,v]=l.useState(!1),d=Et({resolver:Tt(Qt),defaultValues:{caption:"",accessTier:""},mode:"onChange"}),f=d.watch("caption"),R=d.watch("accessTier");l.useEffect(()=>{const S=[];f!=null&&f.trim()||S.push("Add a caption to your post"),R||S.push("Select who can see this post"),s(S),v(S.length===0)},[f,R,m]),l.useEffect(()=>{(async()=>{if(!(!(n!=null&&n.id)||!t))try{const N=await fetch(`/api/creators/${n.id}/tiers`);if(N.ok){const F=await N.json();b(F)}else b([])}catch(N){console.error("Error fetching tiers:",N),b([])}})()},[n==null?void 0:n.id,t]),l.useEffect(()=>{t||(d.reset(),T(),E(!1))},[t,d]);const j=S=>{var $;const N=($=S.target.files)==null?void 0:$[0];if(!N)return;if(N.size>Xt){o({title:"File too large",description:"Please select a file smaller than 16MB.",variant:"destructive"});return}const F=$t.includes(N.type),W=qt.includes(N.type);if(!F&&!W){o({title:"Invalid file type",description:"Please select a valid image or video file.",variant:"destructive"});return}c(N),h(F?"image":"video");const oe=URL.createObjectURL(N);p(oe)},T=()=>{u&&URL.revokeObjectURL(u),c(null),p(null),h(null)},z=async S=>{var N,F;if(!((N=S.caption)!=null&&N.trim())){o({title:"Caption required",description:"Please provide a caption for your post.",variant:"destructive"});return}if(!n){o({title:"Authentication required",description:"Please log in to create a post.",variant:"destructive"});return}P(!0);try{let W=[];if(m){const ge=new FormData;ge.append("media",m);const le=await fetch("/api/upload/post-media",{method:"POST",body:ge});if(!le.ok){const Ke=await le.json();throw new Error(Ke.error||"Failed to upload media")}const be=await le.json();if(W=be.filename?[be.filename]:[],W.length===0)throw new Error("Media upload did not return a valid filename")}const oe={creator_id:parseInt(n.id),title:((F=S.caption)==null?void 0:F.substring(0,50))||"Quick Post",content:S.caption||"",media_type:x||"text",media_urls:W,tier:S.accessTier==="free"?"public":S.accessTier,status:"published",scheduled_for:null},$=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)});if(!$.ok)throw new Error("Failed to create post");const Qe=await $.json();window.dispatchEvent(new CustomEvent("localStorageChange",{detail:{type:"postCreated",post:Qe}})),o({title:"Post published",description:"Your post has been published successfully."}),r(),a==null||a()}catch(W){console.error("Error creating post:",W),o({title:"Error",description:"Failed to publish post. Please try again.",variant:"destructive"})}finally{P(!1)}},ne=()=>e.jsx("div",{className:"space-y-4",children:e.jsx(Rt,{...d,children:e.jsxs("form",{onSubmit:d.handleSubmit(z),className:"space-y-4",children:[e.jsx(Ne,{control:d.control,name:"caption",render:({field:S})=>e.jsxs(Se,{children:[e.jsx(ye,{children:e.jsx(kt,{placeholder:"Write your caption here... (required)",className:"min-h-[120px] resize-none border-0 bg-transparent text-base focus-visible:ring-0",...S,"data-testid":"input-caption"})}),e.jsx(Ce,{})]})}),u&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-muted",children:[x==="image"?e.jsx("img",{src:u,alt:"Preview",className:"w-full h-48 object-cover"}):e.jsx("video",{src:u,className:"w-full h-48 object-cover",controls:!0}),e.jsx(C,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:T,"data-testid":"button-remove-media",children:e.jsx(mt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{type:"file",accept:".jpg,.jpeg,.png,.gif,.mp4,.mov",onChange:j,className:"hidden",id:"quick-media-upload"}),e.jsx(ht,{htmlFor:"quick-media-upload",className:"cursor-pointer",children:e.jsx(C,{type:"button",variant:"ghost",size:"sm",asChild:!0,children:e.jsxs("div",{"data-testid":"button-upload-media",children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),"Media"]})})}),e.jsxs(C,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(!D),"data-testid":"button-advanced-options",className:d.watch("accessTier")?"":"text-blue-600 dark:text-blue-400",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),D?"Less":d.watch("accessTier")?"More":"Select Audience"]})]}),e.jsx(C,{type:"submit",disabled:y||!w,"data-testid":"button-publish-post",children:y?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4 mr-2 animate-spin"}),"Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Publish"]})})]}),H.length>0&&e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"To publish your post:"}),e.jsx("ul",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-0.5",children:H.map((S,N)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-amber-600 dark:bg-amber-400 rounded-full"}),S]},N))})]}),(!d.watch("accessTier")||D)&&e.jsx("div",{className:"border-t pt-4 space-y-4",children:e.jsx(Ne,{control:d.control,name:"accessTier",render:({field:S})=>e.jsxs(Se,{children:[e.jsx(_t,{children:"Who can see this post?"}),e.jsxs(Nt,{onValueChange:S.onChange,value:S.value,children:[e.jsx(ye,{children:e.jsx(St,{"data-testid":"select-access-tier",children:e.jsx(yt,{placeholder:"Select access level"})})}),e.jsxs(Ct,{children:[e.jsx(je,{value:"free",children:"Free for all followers"}),g.map(N=>e.jsxs(je,{value:N.name,children:[N.name," (GHS ",N.price,"/month)"]},N.id))]})]}),e.jsx(Ce,{})]})})})]})})});return i?e.jsx(rt,{open:t,onOpenChange:r,children:e.jsxs(at,{className:"max-h-[90vh]","data-testid":"quick-post-drawer",children:[e.jsx(nt,{className:"pb-2",children:e.jsx(ot,{children:"Create Post"})}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx(ne,{})})]})}):e.jsx(lt,{open:t,onOpenChange:r,children:e.jsxs(it,{className:"sm:max-w-[500px]","data-testid":"quick-post-modal",children:[e.jsx(ct,{children:e.jsx(dt,{children:"Create Post"})}),e.jsx(ne,{})]})})},Re=({targetDate:t,className:r})=>{const a=()=>{const c=+new Date(t)-+new Date;let u={days:0,hours:0,minutes:0,seconds:0};return c>0&&(u={days:Math.floor(c/864e5),hours:Math.floor(c/36e5%24),minutes:Math.floor(c/1e3/60%60),seconds:Math.floor(c/1e3%60)}),u},[n,o]=l.useState(a());l.useEffect(()=>{const c=setTimeout(()=>{o(a())},1e3);return()=>clearTimeout(c)});const i=[];n.days>0&&i.push(`${n.days}d`),(n.hours>0||i.length>0)&&i.push(`${n.hours}h`),(n.minutes>0||i.length>0)&&i.push(`${n.minutes}m`);const m=Object.values(n).some(c=>c>0)||Object.values(n).every(c=>c===0)&&new Date(t)<new Date;return e.jsxs("div",{className:`flex items-center gap-1 ${r}`,children:[e.jsx(J,{className:"w-3 h-3"}),m?e.jsx("span",{children:i.join(" ")}):e.jsx("span",{children:"Expired"})]})},gs=()=>{const{user:t}=Le(),[r,a]=l.useState([]),[n,o]=l.useState([]),[i,m]=l.useState([]),[c,u]=l.useState([]),[p,x]=l.useState(!1),[h,g]=l.useState({subscribers:0,monthlyEarnings:0,totalEarnings:0,growthRate:0,engagementRate:0,postsThisMonth:0}),[b,y]=l.useState({subscriberGoal:0,revenueGoal:0,postsGoal:0,currentSubscribers:0,currentRevenue:0,currentPosts:0}),{data:P,refetch:D}=ft({queryKey:["creator",t==null?void 0:t.id,"goals"],queryFn:async()=>{if(!t)return null;const s=await fetch(`/api/creator/${t.id}/goals`);if(s.ok){const w=await s.json();return console.log("Fetched goals data:",w),w}return null},enabled:!!t}),E=async()=>{if(t)try{const s=await fetch(`/api/creator/${t.id}/content`);if(s.ok){const d=await s.json();console.log("Fetched user content:",d);const f=d.filter(j=>j.status==="scheduled"||j.scheduled_for&&new Date(j.scheduled_for)>new Date);console.log("Filtered scheduled content:",f),o(f);const R=d.filter(j=>j.status==="published");a(R)}const w=await fetch(`/api/creator/${t.id}/analytics`);let v={subscribers:0,monthlyEarnings:0,totalEarnings:0,growthRate:0,engagementRate:0,postsThisMonth:0};w.ok&&(v=await w.json(),g({subscribers:v.subscribers||0,monthlyEarnings:v.monthlyEarnings||0,totalEarnings:v.totalEarnings||0,growthRate:v.growthRate||0,engagementRate:v.engagementRate||0,postsThisMonth:v.postsThisMonth||0}));try{const d=await fetch(`/api/creators/${t.id}/subscribers?limit=3&recent=true`);if(d.ok){const f=await d.json();m(f)}}catch(d){console.error("Error fetching subscribers:",d)}try{console.log("About to fetch tier performance for user:",t.id);const d=await fetch(`/api/creator/${t.id}/tier-performance`);if(console.log("Tier performance response status:",d.status),d.ok){const f=await d.json();console.log("Fetched tier performance data:",f),u(f)}else console.error("Failed to fetch tier performance:",d.status)}catch(d){console.error("Error fetching tier performance:",d)}}catch(s){console.error("Error fetching user posts:",s)}};l.useEffect(()=>{E()},[t]),l.useEffect(()=>{P&&(console.log("Updating monthly goals with:",P),y({subscriberGoal:P.subscriberGoal||30,revenueGoal:P.revenueGoal||1e3,postsGoal:P.postsGoal||15,currentSubscribers:h.subscribers||0,currentRevenue:h.monthlyEarnings||0,currentPosts:h.postsThisMonth||0}))},[P,h]);const H=()=>{E()};return l.useEffect(()=>{const s=()=>{E(),D()};return window.addEventListener("focus",s),()=>window.removeEventListener("focus",s)},[t,D]),e.jsxs(ie,{children:[e.jsx("div",{className:"bg-gradient-to-r from-accent/10 via-primary/5 to-accent/10 border-b border-border",children:e.jsx(ie,{maxWidth:"7xl",enablePadding:!0,enableTopPadding:!0,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-3 mb-4",children:e.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-foreground",children:"Creator Dashboard"})}),e.jsxs("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:["Welcome back, ",t==null?void 0:t.username,"! Here's your creator overview"]})]})})}),e.jsx(ie,{maxWidth:"7xl",enablePadding:!0,className:"py-6 sm:py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"lg:col-span-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsx(k,{className:"bg-gradient-card border-border/50",children:e.jsx(L,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Total Subscribers"}),e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:h.subscribers.toLocaleString()}),e.jsxs("p",{className:"text-xs text-success",children:["+",h.growthRate,"% this month"]})]}),e.jsx(de,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white opacity-70",strokeWidth:1})]})})}),e.jsx(k,{className:"bg-gradient-card border-border/50",children:e.jsx(L,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Monthly Earnings"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:["GHS ",h.monthlyEarnings.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-success",children:["+",h.growthRate,"% vs last month"]})]}),e.jsx(Ae,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white opacity-70",strokeWidth:1})]})})}),e.jsx(k,{className:"bg-gradient-card border-border/50",children:e.jsx(L,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Total Earnings"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:["GHS ",h.totalEarnings.toLocaleString()]}),e.jsx("p",{className:"text-xs text-success",children:"All time"})]}),e.jsx(De,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white opacity-70",strokeWidth:1})]})})}),e.jsx(k,{className:"bg-gradient-card border-border/50",children:e.jsx(L,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:"Engagement Rate"}),e.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:[h.engagementRate,"%"]}),e.jsx("p",{className:"text-xs text-success",children:"Above average"})]}),e.jsx(ce,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white opacity-70",strokeWidth:1})]})})})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4 sm:space-y-6",children:[e.jsx(k,{className:"bg-gradient-to-r from-primary/10 to-primary/5 border-primary/20",children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"Share something new"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick post to your subscribers"})]}),e.jsxs(C,{onClick:()=>x(!0),className:"bg-primary hover:bg-primary/90","data-testid":"button-quick-post",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Quick Post"]})]})})}),e.jsx(Yt,{}),e.jsxs(k,{className:"bg-gradient-card border-border/50",children:[e.jsxs(V,{children:[e.jsx(G,{className:"text-base sm:text-xl",children:"Subscription Tiers Performance"}),e.jsx(pt,{className:"text-sm",children:"Revenue breakdown by tier"})]}),e.jsx(L,{className:"space-y-4",children:c.length>0?c.map(s=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(O,{variant:"outline",className:"text-xs",children:s.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["GHS ",s.price,"/month"]})]}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[s.subscribers," subscribers"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["GHS ",s.revenue.toLocaleString(),"/month"]})]})]}),e.jsx(Q,{value:h.subscribers>0?s.subscribers/h.subscribers*100:0,className:"h-2"})]},s.name)):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ke,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No subscription tiers found"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Create subscription tiers to start earning revenue"}),e.jsx(C,{variant:"outline",size:"sm",className:"mt-2",asChild:!0,children:e.jsx(A,{to:"/creator/tiers",children:"Create Tiers"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(k,{className:"bg-gradient-card border-border/50",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{className:"text-base sm:text-lg",children:"Scheduled Content"}),e.jsx(C,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(A,{to:"/creator/manage-content",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Manage"]})})]})}),e.jsx(L,{children:n.length>0?n.length>2?e.jsx("div",{children:e.jsx(ue,{className:"h-[200px] w-full",style:{paddingRight:"8px"},children:e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:s.media_urls&&s.media_urls.length>0?(()=>{const w=s.media_urls[0].startsWith("/uploads/")?s.media_urls[0]:`/uploads/${s.media_urls[0]}`;return s.media_type==="video"?e.jsx("video",{src:w,className:"w-16 h-16 object-cover rounded-lg",muted:!0,preload:"metadata",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 002 2v8a2 2 0 002 2z"></path></svg></div>')}}):e.jsx("img",{src:w,alt:s.title||"Scheduled Post",className:"w-16 h-16 object-cover rounded-lg",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>')}})})():e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center",children:s.media_type==="image"?e.jsx(K,{className:"w-6 h-6 text-muted-foreground"}):s.media_type==="video"?e.jsx(Z,{className:"w-6 h-6 text-muted-foreground"}):e.jsx(B,{className:"w-6 h-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm text-ellipsis overflow-hidden whitespace-nowrap",children:s.title||s.content||"Untitled Post"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(O,{variant:"outline",className:"text-xs",children:s.tier}),e.jsx(Re,{targetDate:s.scheduled_for,className:"text-xs font-medium text-primary"})]}),e.jsx("div",{className:"flex items-center gap-4 mt-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsx("span",{children:s.status==="scheduled"?"Pending":"Draft"})]})})]})]},s.id))})})}):e.jsx("div",{className:"space-y-4",children:n.slice(0,2).map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:s.media_urls&&s.media_urls.length>0?(()=>{const w=s.media_urls[0].startsWith("/uploads/")?s.media_urls[0]:`/uploads/${s.media_urls[0]}`;return s.media_type==="video"?e.jsx("video",{src:w,className:"w-16 h-16 object-cover rounded-lg",muted:!0,preload:"metadata",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 002 2v8a2 2 0 002 2z"></path></svg></div>')}}):e.jsx("img",{src:w,alt:s.title||"Scheduled Post",className:"w-16 h-16 object-cover rounded-lg",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>')}})})():e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center",children:s.media_type==="image"?e.jsx(K,{className:"w-6 h-6 text-muted-foreground"}):s.media_type==="video"?e.jsx(Z,{className:"w-6 h-6 text-muted-foreground"}):e.jsx(B,{className:"w-6 h-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm text-ellipsis overflow-hidden whitespace-nowrap",children:s.title||s.content||"Untitled Post"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(O,{variant:"outline",className:"text-xs",children:s.tier}),e.jsx(Re,{targetDate:s.scheduled_for,className:"text-xs font-medium text-primary"})]}),e.jsx("div",{className:"flex items-center gap-4 mt-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(J,{className:"w-3 h-3"}),e.jsx("span",{children:s.status==="scheduled"?"Pending":"Draft"})]})})]})]},s.id))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Pe,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No scheduled content"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Schedule posts to publish them automatically at your chosen time"}),e.jsx(C,{variant:"outline",size:"sm",className:"mt-2",asChild:!0,children:e.jsx(A,{to:"/creator/upload",children:"Create Content"})})]})})]}),e.jsxs(k,{className:"bg-gradient-card border-border/50",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{className:"text-base sm:text-lg",children:"Recent Posts"}),e.jsx(C,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(A,{to:"/creator/manage-content",children:"View All"})})]})}),e.jsx(L,{children:r.length>0?r.length>2?e.jsx(ue,{className:"h-[200px] w-full",style:{paddingRight:"8px"},children:e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:s.media_urls&&s.media_urls.length>0?(()=>{const w=s.media_urls[0].startsWith("/uploads/")?s.media_urls[0]:`/uploads/${s.media_urls[0]}`;return s.media_type==="video"?e.jsx("video",{src:w,className:"w-16 h-16 object-cover rounded-lg",muted:!0,preload:"metadata",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 002 2v8a2 2 0 002 2z"></path></svg></div>')}}):e.jsx("img",{src:w,alt:s.title||"Post",className:"w-16 h-16 object-cover rounded-lg",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>')}})})():e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center",children:s.media_type==="image"?e.jsx(K,{className:"w-6 h-6 text-muted-foreground"}):s.media_type==="video"?e.jsx(Z,{className:"w-6 h-6 text-muted-foreground"}):e.jsx(B,{className:"w-6 h-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm line-clamp-1",children:s.caption||s.title||"Untitled Post"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(O,{variant:"outline",className:"text-xs",children:s.tier}),e.jsx("span",{className:"text-xs text-muted-foreground truncate",children:s.date||new Date(s.created_at||Date.now()).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Ee,{className:"w-3 h-3"}),e.jsx("span",{children:s.views||s.views_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(ce,{className:"w-3 h-3"}),e.jsx("span",{children:s.likes||s.likes_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{children:s.comments||s.comments_count||0})]})]})]})]},s.id))})}):e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background/50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0",children:s.media_urls&&s.media_urls.length>0?(()=>{const w=s.media_urls[0].startsWith("/uploads/")?s.media_urls[0]:`/uploads/${s.media_urls[0]}`;return s.media_type==="video"?e.jsx("video",{src:w,className:"w-16 h-16 object-cover rounded-lg",muted:!0,preload:"metadata",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 002 2v8a2 2 0 002 2z"></path></svg></div>')}}):e.jsx("img",{src:w,alt:s.title||"Post",className:"w-16 h-16 object-cover rounded-lg",onError:v=>{const d=v.target;d.style.display="none";const f=d.parentElement;f&&(f.innerHTML='<div class="w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center"><svg class="w-6 h-6 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>')}})})():e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-accent/20 to-accent/10 rounded-lg flex items-center justify-center",children:s.media_type==="image"?e.jsx(K,{className:"w-6 h-6 text-muted-foreground"}):s.media_type==="video"?e.jsx(Z,{className:"w-6 h-6 text-muted-foreground"}):e.jsx(B,{className:"w-6 h-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm line-clamp-1",children:s.caption||s.title||"Untitled Post"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(O,{variant:"outline",className:"text-xs",children:s.tier}),e.jsx("span",{className:"text-xs text-muted-foreground truncate",children:s.date||new Date(s.created_at||Date.now()).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Ee,{className:"w-3 h-3"}),e.jsx("span",{children:s.views||s.views_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(ce,{className:"w-3 h-3"}),e.jsx("span",{children:s.likes||s.likes_count||0})]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(me,{className:"w-3 h-3"}),e.jsx("span",{children:s.comments||s.comments_count||0})]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(B,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No posts yet"}),e.jsx(C,{variant:"outline",size:"sm",className:"mt-2",asChild:!0,children:e.jsx(A,{to:"/creator/upload",children:"Create Post"})})]})})]})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs(k,{className:"bg-gradient-card border-border/50",children:[e.jsx(V,{children:e.jsx(G,{className:"text-base sm:text-lg",children:"Recent Subscribers"})}),e.jsx(L,{className:"space-y-3",children:i.length>0?e.jsxs(e.Fragment,{children:[i.map(s=>{var w,v,d,f,R,j;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(gt,{className:"w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0",children:[e.jsx(bt,{src:((w=s.fan)==null?void 0:w.avatar)||s.avatar,alt:((v=s.fan)==null?void 0:v.username)||s.username}),e.jsx(vt,{className:"text-xs",children:(R=(f=((d=s.fan)==null?void 0:d.username)||s.username)==null?void 0:f.charAt(0))==null?void 0:R.toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:((j=s.fan)==null?void 0:j.username)||s.username}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2",children:[e.jsx(O,{variant:"outline",className:"text-xs",children:s.tier_name||s.tier||"Subscriber"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.created_at?new Date(s.created_at).toLocaleDateString()===new Date().toLocaleDateString()?"Today":new Date(s.created_at).toLocaleDateString():"Recently"})]})]})]},s.id)}),e.jsx(C,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsx(A,{to:"/creator/subscribers",children:"View All"})})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(de,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No subscribers yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Share your profile to start gaining subscribers"}),e.jsx(C,{variant:"outline",size:"sm",className:"mt-2",asChild:!0,children:e.jsx(A,{to:`/creator/${t==null?void 0:t.username}`,children:"View Profile"})})]})})]}),e.jsxs(k,{className:"bg-gradient-card border-border/50",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{className:"text-base sm:text-lg",children:"Monthly Goals"}),e.jsx(C,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(A,{to:"/creator/settings?tab=goals",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Edit Goals"]})})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Subscriber Goal"}),e.jsxs("span",{children:[b.currentSubscribers.toLocaleString()," / ",b.subscriberGoal.toLocaleString()]})]}),e.jsx(Q,{value:b.currentSubscribers/b.subscriberGoal*100,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Revenue Goal"}),e.jsxs("span",{children:["GHS ",b.currentRevenue.toLocaleString()," / ",b.revenueGoal.toLocaleString()]})]}),e.jsx(Q,{value:b.currentRevenue/b.revenueGoal*100,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Posts Goal"}),e.jsxs("span",{children:[b.currentPosts," / ",b.postsGoal]})]}),e.jsx(Q,{value:b.currentPosts/b.postsGoal*100,className:"h-2"})]})]})]}),e.jsxs(k,{className:"bg-gradient-card border-border/50",children:[e.jsx(V,{children:e.jsx(G,{className:"text-base sm:text-lg",children:"Profile"})}),e.jsxs(L,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Keep your profile updated to attract more subscribers"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs(A,{to:`/creator/${t==null?void 0:t.username}`,children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"View My Profile"]})}),e.jsx(C,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs(A,{to:"/creator/settings",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]})]})]})]})]})}),e.jsx(Kt,{isOpen:p,onClose:()=>x(!1),onPostCreated:H})]})};export{gs as CreatorDashboard};
